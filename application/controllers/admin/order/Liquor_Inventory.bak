<?php defined('BASEPATH') or exit('No direct script access allowed');

class Liquor_Inventory extends MY_Controller
{

    public function __construct()
    {

        parent::__construct();

        auth_check(); // check login auth
        $this->rbac->check_module_access();
        $this->load->model('Master/LiquorMapping_Model', 'liquor_mapping_master_model');
        $this->load->model('Order/Stockist_order_model', 'stockist_order_model');
        $this->load->model('admin/Activity_model', 'activity_model');
        $this->load->helper(array('bsf_form/list_field', 'bsf_form/master_table', 'Ats/common'));
    }

    public function liquor_mapping()
    {
        $data = $this->liquor_mapping_master_model->fetchInitialAlcoholFormDetails();
        $this->load->view('admin/includes/_header');
        $this->load->view('liquor/liquorMappingView', $data);
        $this->load->view('admin/includes/_footer');

    }


    public function sales_report()
    {
        $this->load->view('admin/includes/_header');
        $this->load->view('reports/sales_report');
        $this->load->view('admin/includes/_footer');
    }

    public function display_stock()
    {
        $this->load->view('admin/includes/_header');
        $this->load->view('stock/stock_display_view');
        $this->load->view('admin/includes/_footer');
    }
    // to fetch entity order
    public function entity_order()
    {
        // print_r($_SESSION);
        // die();
        // $this->rbac->check_operation_access(); // check opration permission
        $data['cart_type'] = 'entity';
        $entity_id = $this->session->userdata('entity_id');
        $delivarable_entity_id = $this->stockist_order_model->fetch_delivarable_entity_id($entity_id); // for onload data show

        if (count(json_decode(json_encode($delivarable_entity_id), true)) > 0) {
            $data['delivarable_entity_id'] = $delivarable_entity_id[0]->delivarable_entity_id;
        } else {
            $data['delivarable_entity_id'] = 1;
        }


        $keyword = 'ALL';

        $selected_state = $this->input->post('selected_state');
        $selected_city = $this->input->post('selected_city');

        $product_cart_BSF = $this->session->userdata('product_cart_BSF');
        if (!is_array($product_cart_BSF)) {
            $product_cart_BSF = array();
        }

        $this->load->view('admin/includes/_header');
        $this->load->view('order/search_product', $data);
        $this->load->view('admin/includes/_footer');
    }
}
